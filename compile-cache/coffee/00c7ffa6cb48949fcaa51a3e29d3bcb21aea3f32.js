(function() {
  var ResultItemView, ResultModel, path;

  ResultItemView = require('../views/result-item-view');

  path = require('path');

  module.exports = ResultModel = (function() {
    function ResultModel(response, keyword, cwd) {
      this.keyword = (keyword != null) && keyword.trim() !== "" ? keyword : false;
      this.cwd = cwd;
      this.processResultString(response);
    }

    ResultModel.prototype.getFilePath = function() {
      return path.join(this.cwd, this.fileName);
    };

    ResultModel.prototype.processResultString = function(response) {
      var data, regex;
      this.resultString = response;
      data = response.split(" ", 3);
      data.push(response.replace(data.join(" ") + " ", ""));
      this.fileName = data[0];
      this.functionName = data[1];
      this.lineNumber = parseInt(data[2]);
      this.lineText = data[3];
      this.isJustFile = data[3].trim() === '<unknown>';
      regex = new RegExp(this.keyword, 'g');
      this.htmlFileName = this.fileName.replace(regex, '<span class="text-highlight bold">\$&</span>');
      this.projectPath = path.basename(this.cwd);
      if (this.keyword) {
        this.htmlLineText = data[3].replace(/</g, '&lt;');
        this.htmlLineText = this.htmlLineText.replace(/>/g, '&gt;');
        return this.htmlLineText = this.htmlLineText.replace(regex, '<span class="text-highlight bold">\$&</span>');
      }
    };

    ResultModel.prototype.generateView = function() {
      return ResultItemView.setup(this);
    };

    return ResultModel;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL2hvbWUvY2hhbXAvLmF0b20vcGFja2FnZXMvYXRvbS1jc2NvcGUvbGliL21vZGVscy9yZXN1bHQtbW9kZWwuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxNQUFBLGlDQUFBOztBQUFBLEVBQUEsY0FBQSxHQUFpQixPQUFBLENBQVEsMkJBQVIsQ0FBakIsQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUixDQURQLENBQUE7O0FBQUEsRUFHQSxNQUFNLENBQUMsT0FBUCxHQUNRO0FBQ1MsSUFBQSxxQkFBQyxRQUFELEVBQVcsT0FBWCxFQUFvQixHQUFwQixHQUFBO0FBQ1gsTUFBQSxJQUFDLENBQUEsT0FBRCxHQUFjLGlCQUFBLElBQWEsT0FBTyxDQUFDLElBQVIsQ0FBQSxDQUFBLEtBQW9CLEVBQXBDLEdBQTRDLE9BQTVDLEdBQXlELEtBQXBFLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxHQUFELEdBQU8sR0FEUCxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsbUJBQUQsQ0FBcUIsUUFBckIsQ0FGQSxDQURXO0lBQUEsQ0FBYjs7QUFBQSwwQkFLQSxXQUFBLEdBQWEsU0FBQSxHQUFBO0FBQ1gsYUFBTyxJQUFJLENBQUMsSUFBTCxDQUFVLElBQUMsQ0FBQSxHQUFYLEVBQWdCLElBQUMsQ0FBQSxRQUFqQixDQUFQLENBRFc7SUFBQSxDQUxiLENBQUE7O0FBQUEsMEJBUUEsbUJBQUEsR0FBcUIsU0FBQyxRQUFELEdBQUE7QUFDbkIsVUFBQSxXQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsWUFBRCxHQUFnQixRQUFoQixDQUFBO0FBQUEsTUFDQSxJQUFBLEdBQU8sUUFBUSxDQUFDLEtBQVQsQ0FBZSxHQUFmLEVBQW9CLENBQXBCLENBRFAsQ0FBQTtBQUFBLE1BRUEsSUFBSSxDQUFDLElBQUwsQ0FBVSxRQUFRLENBQUMsT0FBVCxDQUFpQixJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsQ0FBQSxHQUFpQixHQUFsQyxFQUF1QyxFQUF2QyxDQUFWLENBRkEsQ0FBQTtBQUFBLE1BSUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFLLENBQUEsQ0FBQSxDQUpqQixDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsWUFBRCxHQUFnQixJQUFLLENBQUEsQ0FBQSxDQUxyQixDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsVUFBRCxHQUFjLFFBQUEsQ0FBUyxJQUFLLENBQUEsQ0FBQSxDQUFkLENBTmQsQ0FBQTtBQUFBLE1BT0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFLLENBQUEsQ0FBQSxDQVBqQixDQUFBO0FBQUEsTUFTQSxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUssQ0FBQSxDQUFBLENBQUUsQ0FBQyxJQUFSLENBQUEsQ0FBQSxLQUFrQixXQVRoQyxDQUFBO0FBQUEsTUFVQSxLQUFBLEdBQVksSUFBQSxNQUFBLENBQU8sSUFBQyxDQUFBLE9BQVIsRUFBaUIsR0FBakIsQ0FWWixDQUFBO0FBQUEsTUFXQSxJQUFDLENBQUEsWUFBRCxHQUFnQixJQUFDLENBQUEsUUFBUSxDQUFDLE9BQVYsQ0FBa0IsS0FBbEIsRUFBeUIsOENBQXpCLENBWGhCLENBQUE7QUFBQSxNQVlBLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxDQUFDLFFBQUwsQ0FBYyxJQUFDLENBQUEsR0FBZixDQVpmLENBQUE7QUFjQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxZQUFELEdBQWdCLElBQUssQ0FBQSxDQUFBLENBQUUsQ0FBQyxPQUFSLENBQWdCLElBQWhCLEVBQXNCLE1BQXRCLENBQWhCLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxZQUFELEdBQWdCLElBQUMsQ0FBQSxZQUFZLENBQUMsT0FBZCxDQUFzQixJQUF0QixFQUE0QixNQUE1QixDQURoQixDQUFBO2VBRUEsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsSUFBQyxDQUFBLFlBQVksQ0FBQyxPQUFkLENBQXNCLEtBQXRCLEVBQTZCLDhDQUE3QixFQUhsQjtPQWZtQjtJQUFBLENBUnJCLENBQUE7O0FBQUEsMEJBNEJBLFlBQUEsR0FBYyxTQUFBLEdBQUE7QUFDWixhQUFPLGNBQWMsQ0FBQyxLQUFmLENBQXFCLElBQXJCLENBQVAsQ0FEWTtJQUFBLENBNUJkLENBQUE7O3VCQUFBOztNQUxKLENBQUE7QUFBQSIKfQ==

//# sourceURL=/home/champ/.atom/packages/atom-cscope/lib/models/result-model.coffee
