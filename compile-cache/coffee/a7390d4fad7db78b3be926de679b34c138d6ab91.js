(function() {
  var Emitter, Tab, TabItem, TabView;

  TabView = require('./tab-view');

  TabItem = require('./tab-item');

  Emitter = require('atom').Emitter;

  module.exports = Tab = (function() {
    function Tab(command) {
      this.command = command;
      this.emitter = new Emitter;
      this.header = new TabItem(this.command.project, this.command.name, (function(_this) {
        return function() {
          return _this.close();
        };
      })(this));
      this.view = new TabView;
      this.header.setHeader("" + this.command.name + " of " + this.command.project);
      this.focus = null;
      this.console = null;
      this.input = null;
    }

    Tab.prototype.destroy = function() {
      this.emitter.dispose();
      this.input = null;
      this.focus = null;
      this.console = null;
      this.header = null;
      this.view = null;
      this.title = null;
      return this.command = null;
    };

    Tab.prototype.clear = function() {
      this.view.clear();
      this.error = null;
      this.code = null;
      return this.signal = null;
    };

    Tab.prototype.setInput = function(input) {
      this.input = input;
    };

    Tab.prototype.setRunning = function() {
      return this.header.setIcon('sync');
    };

    Tab.prototype.setError = function(error) {
      this.error = error;
      this.header.setIcon('x');
      this.code = -1;
      return this.getHeader();
    };

    Tab.prototype.setFinished = function(status) {
      this.code = status.exitcode;
      this.signal = status.signal;
      if (this.code === 0) {
        return this.header.setIcon('check');
      } else {
        this.header.setIcon('x');
        return this.getHeader();
      }
    };

    Tab.prototype.setCancelled = function() {
      this.header.setIcon('x');
      if (this.code == null) {
        this.code = -2;
      }
      return this.getHeader();
    };

    Tab.prototype.newLine = function() {
      return this.view.printLine('<div></div>');
    };

    Tab.prototype.scroll = function() {
      return this.view.scroll();
    };

    Tab.prototype.finishConsole = function() {
      return this.view.finishConsole();
    };

    Tab.prototype.hasFocus = function() {
      if (this.console == null) {
        return true;
      }
      return this === this.console.activeTab;
    };

    Tab.prototype.getHeader = function() {
      var s;
      if (this.title == null) {
        this.title = document.createElement('span');
      }
      this.title.innerText = "" + this.command.name + " of " + this.command.project;
      if (this.code == null) {
        return this.title;
      }
      if (this.code !== 0) {
        s = document.createElement('span');
        this.title.innerText += ': ';
        s.className = 'error';
        if (this.signal !== null) {
          s.innerText = 'received ' + this.signal;
        } else if (this.code > 0) {
          s.innerText = 'finished with exit code ' + this.code;
        } else if (this.code === -1) {
          s.innerText = 'received ' + this.error;
        } else {
          s.innerText = 'aborted by user or package';
        }
        this.title.appendChild(s);
      }
      return this.title;
    };

    Tab.prototype.close = function() {
      return this.emitter.emit('close');
    };

    Tab.prototype.onClose = function(callback) {
      return this.emitter.on('close', callback);
    };

    return Tab;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL2hvbWUvY2hhbXAvLmF0b20vcGFja2FnZXMvYnVpbGQtdG9vbHMvbGliL2NvbnNvbGUvdGFiLmNvZmZlZSIKICBdLAogICJuYW1lcyI6IFtdLAogICJtYXBwaW5ncyI6ICJBQUFBO0FBQUEsTUFBQSw4QkFBQTs7QUFBQSxFQUFBLE9BQUEsR0FBVSxPQUFBLENBQVEsWUFBUixDQUFWLENBQUE7O0FBQUEsRUFDQSxPQUFBLEdBQVUsT0FBQSxDQUFRLFlBQVIsQ0FEVixDQUFBOztBQUFBLEVBR0MsVUFBVyxPQUFBLENBQVEsTUFBUixFQUFYLE9BSEQsQ0FBQTs7QUFBQSxFQUtBLE1BQU0sQ0FBQyxPQUFQLEdBQ1E7QUFDUyxJQUFBLGFBQUUsT0FBRixHQUFBO0FBQ1gsTUFEWSxJQUFDLENBQUEsVUFBQSxPQUNiLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsR0FBQSxDQUFBLE9BQVgsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLE1BQUQsR0FBYyxJQUFBLE9BQUEsQ0FBUSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQWpCLEVBQTBCLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBbkMsRUFBeUMsQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUEsR0FBQTtpQkFBRyxLQUFDLENBQUEsS0FBRCxDQUFBLEVBQUg7UUFBQSxFQUFBO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QyxDQURkLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxJQUFELEdBQVEsR0FBQSxDQUFBLE9BRlIsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLEVBQUEsR0FBRyxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVosR0FBaUIsTUFBakIsR0FBdUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFsRCxDQUhBLENBQUE7QUFBQSxNQUlBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFKVCxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBTFgsQ0FBQTtBQUFBLE1BTUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQU5ULENBRFc7SUFBQSxDQUFiOztBQUFBLGtCQVNBLE9BQUEsR0FBUyxTQUFBLEdBQUE7QUFDUCxNQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxDQUFBLENBQUEsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQURULENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFGVCxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBSFgsQ0FBQTtBQUFBLE1BSUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUpWLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFMUixDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBTlQsQ0FBQTthQU9BLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FSSjtJQUFBLENBVFQsQ0FBQTs7QUFBQSxrQkFtQkEsS0FBQSxHQUFPLFNBQUEsR0FBQTtBQUNMLE1BQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFOLENBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBRFQsQ0FBQTtBQUFBLE1BRUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUZSLENBQUE7YUFHQSxJQUFDLENBQUEsTUFBRCxHQUFVLEtBSkw7SUFBQSxDQW5CUCxDQUFBOztBQUFBLGtCQXlCQSxRQUFBLEdBQVUsU0FBRSxLQUFGLEdBQUE7QUFBVSxNQUFULElBQUMsQ0FBQSxRQUFBLEtBQVEsQ0FBVjtJQUFBLENBekJWLENBQUE7O0FBQUEsa0JBMkJBLFVBQUEsR0FBWSxTQUFBLEdBQUE7YUFDVixJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsTUFBaEIsRUFEVTtJQUFBLENBM0JaLENBQUE7O0FBQUEsa0JBOEJBLFFBQUEsR0FBVSxTQUFFLEtBQUYsR0FBQTtBQUNSLE1BRFMsSUFBQyxDQUFBLFFBQUEsS0FDVixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsR0FBaEIsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsSUFBRCxHQUFRLENBQUEsQ0FEUixDQUFBO2FBRUEsSUFBQyxDQUFBLFNBQUQsQ0FBQSxFQUhRO0lBQUEsQ0E5QlYsQ0FBQTs7QUFBQSxrQkFtQ0EsV0FBQSxHQUFhLFNBQUMsTUFBRCxHQUFBO0FBQ1gsTUFBQSxJQUFDLENBQUEsSUFBRCxHQUFRLE1BQU0sQ0FBQyxRQUFmLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxNQUFELEdBQVUsTUFBTSxDQUFDLE1BRGpCLENBQUE7QUFFQSxNQUFBLElBQUcsSUFBQyxDQUFBLElBQUQsS0FBUyxDQUFaO2VBQ0UsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLE9BQWhCLEVBREY7T0FBQSxNQUFBO0FBR0UsUUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsR0FBaEIsQ0FBQSxDQUFBO2VBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBQSxFQUpGO09BSFc7SUFBQSxDQW5DYixDQUFBOztBQUFBLGtCQTRDQSxZQUFBLEdBQWMsU0FBQSxHQUFBO0FBQ1osTUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsR0FBaEIsQ0FBQSxDQUFBOztRQUNBLElBQUMsQ0FBQSxPQUFRLENBQUE7T0FEVDthQUVBLElBQUMsQ0FBQSxTQUFELENBQUEsRUFIWTtJQUFBLENBNUNkLENBQUE7O0FBQUEsa0JBaURBLE9BQUEsR0FBUyxTQUFBLEdBQUE7YUFDUCxJQUFDLENBQUEsSUFBSSxDQUFDLFNBQU4sQ0FBZ0IsYUFBaEIsRUFETztJQUFBLENBakRULENBQUE7O0FBQUEsa0JBb0RBLE1BQUEsR0FBUSxTQUFBLEdBQUE7YUFDTixJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU4sQ0FBQSxFQURNO0lBQUEsQ0FwRFIsQ0FBQTs7QUFBQSxrQkF1REEsYUFBQSxHQUFlLFNBQUEsR0FBQTthQUNiLElBQUMsQ0FBQSxJQUFJLENBQUMsYUFBTixDQUFBLEVBRGE7SUFBQSxDQXZEZixDQUFBOztBQUFBLGtCQTBEQSxRQUFBLEdBQVUsU0FBQSxHQUFBO0FBQ1IsTUFBQSxJQUFtQixvQkFBbkI7QUFBQSxlQUFPLElBQVAsQ0FBQTtPQUFBO2FBQ0EsSUFBQSxLQUFRLElBQUMsQ0FBQSxPQUFPLENBQUMsVUFGVDtJQUFBLENBMURWLENBQUE7O0FBQUEsa0JBOERBLFNBQUEsR0FBVyxTQUFBLEdBQUE7QUFDVCxVQUFBLENBQUE7O1FBQUEsSUFBQyxDQUFBLFFBQVMsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsTUFBdkI7T0FBVjtBQUFBLE1BQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxTQUFQLEdBQW1CLEVBQUEsR0FBRyxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVosR0FBaUIsTUFBakIsR0FBdUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQURuRCxDQUFBO0FBRUEsTUFBQSxJQUFxQixpQkFBckI7QUFBQSxlQUFPLElBQUMsQ0FBQSxLQUFSLENBQUE7T0FGQTtBQUdBLE1BQUEsSUFBRyxJQUFDLENBQUEsSUFBRCxLQUFXLENBQWQ7QUFDRSxRQUFBLENBQUEsR0FBSSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixDQUFKLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsU0FBUCxJQUFvQixJQURwQixDQUFBO0FBQUEsUUFFQSxDQUFDLENBQUMsU0FBRixHQUFjLE9BRmQsQ0FBQTtBQUdBLFFBQUEsSUFBRyxJQUFDLENBQUEsTUFBRCxLQUFhLElBQWhCO0FBQ0UsVUFBQSxDQUFDLENBQUMsU0FBRixHQUFjLFdBQUEsR0FBYyxJQUFDLENBQUEsTUFBN0IsQ0FERjtTQUFBLE1BRUssSUFBRyxJQUFDLENBQUEsSUFBRCxHQUFRLENBQVg7QUFDSCxVQUFBLENBQUMsQ0FBQyxTQUFGLEdBQWMsMEJBQUEsR0FBNkIsSUFBQyxDQUFBLElBQTVDLENBREc7U0FBQSxNQUVBLElBQUcsSUFBQyxDQUFBLElBQUQsS0FBUyxDQUFBLENBQVo7QUFDSCxVQUFBLENBQUMsQ0FBQyxTQUFGLEdBQWMsV0FBQSxHQUFjLElBQUMsQ0FBQSxLQUE3QixDQURHO1NBQUEsTUFBQTtBQUdILFVBQUEsQ0FBQyxDQUFDLFNBQUYsR0FBYyw0QkFBZCxDQUhHO1NBUEw7QUFBQSxRQVdBLElBQUMsQ0FBQSxLQUFLLENBQUMsV0FBUCxDQUFtQixDQUFuQixDQVhBLENBREY7T0FIQTtBQWdCQSxhQUFPLElBQUMsQ0FBQSxLQUFSLENBakJTO0lBQUEsQ0E5RFgsQ0FBQTs7QUFBQSxrQkFpRkEsS0FBQSxHQUFPLFNBQUEsR0FBQTthQUNMLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLE9BQWQsRUFESztJQUFBLENBakZQLENBQUE7O0FBQUEsa0JBb0ZBLE9BQUEsR0FBUyxTQUFDLFFBQUQsR0FBQTthQUNQLElBQUMsQ0FBQSxPQUFPLENBQUMsRUFBVCxDQUFZLE9BQVosRUFBcUIsUUFBckIsRUFETztJQUFBLENBcEZULENBQUE7O2VBQUE7O01BUEosQ0FBQTtBQUFBIgp9

//# sourceURL=/home/champ/.atom/packages/build-tools/lib/console/tab.coffee
